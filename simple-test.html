<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calendar Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .calendar {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        .status {
            background: #e8f5e8;
            border: 1px solid #4CAF50;
            color: #2E7D32;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üîç Calendar Loading Test</h1>
    
    <div id="status" class="loading">
        ‚è≥ Testing calendar initialization...
    </div>

    <div class="calendar">
        <div id="test-results"></div>
    </div>

    <script>
        console.log('üöÄ Starting calendar test...');
        
        let testResults = [];
        
        function addResult(test, success, message) {
            testResults.push({test, success, message});
            updateDisplay();
        }
        
        function updateDisplay() {
            const resultsDiv = document.getElementById('test-results');
            const statusDiv = document.getElementById('status');
            
            let html = '<h3>Test Results:</h3>';
            testResults.forEach(result => {
                const className = result.success ? 'status' : 'error';
                const icon = result.success ? '‚úÖ' : '‚ùå';
                html += `<div class="${className}">${icon} ${result.test}: ${result.message}</div>`;
            });
            
            resultsDiv.innerHTML = html;
            
            const allPassed = testResults.every(r => r.success);
            const completed = testResults.length >= 5; // Expected number of tests
            
            if (completed) {
                if (allPassed) {
                    statusDiv.innerHTML = '<div class="status">‚úÖ All tests passed! Calendar should work.</div>';
                } else {
                    statusDiv.innerHTML = '<div class="error">‚ùå Some tests failed. Check results below.</div>';
                }
            }
        }
        
        // Test 1: Basic JavaScript
        try {
            const testObj = {test: true};
            if (testObj.test) {
                addResult('Basic JavaScript', true, 'Object creation and property access working');
            }
        } catch (e) {
            addResult('Basic JavaScript', false, `Error: ${e.message}`);
        }
        
        // Test 2: DOM API
        try {
            const testDiv = document.createElement('div');
            testDiv.innerHTML = 'test';
            if (testDiv.innerHTML === 'test') {
                addResult('DOM Manipulation', true, 'createElement and innerHTML working');
            }
        } catch (e) {
            addResult('DOM Manipulation', false, `Error: ${e.message}`);
        }
        
        // Test 3: Date functions
        try {
            const now = new Date();
            const year = now.getFullYear();
            if (year > 2020 && year < 2030) {
                addResult('Date Functions', true, `Current year: ${year}`);
            } else {
                addResult('Date Functions', false, `Unexpected year: ${year}`);
            }
        } catch (e) {
            addResult('Date Functions', false, `Error: ${e.message}`);
        }
        
        // Test 4: LocalStorage
        try {
            localStorage.setItem('test', 'working');
            const result = localStorage.getItem('test');
            localStorage.removeItem('test');
            if (result === 'working') {
                addResult('LocalStorage', true, 'Read/write operations working');
            } else {
                addResult('LocalStorage', false, 'Read/write mismatch');
            }
        } catch (e) {
            addResult('LocalStorage', false, `Error: ${e.message}`);
        }
        
        // Test 5: Event Listeners
        try {
            const testEl = document.createElement('div');
            let eventFired = false;
            testEl.addEventListener('click', () => { eventFired = true; });
            testEl.click();
            if (eventFired) {
                addResult('Event Listeners', true, 'addEventListener and click events working');
            } else {
                addResult('Event Listeners', false, 'Event not fired');
            }
        } catch (e) {
            addResult('Event Listeners', false, `Error: ${e.message}`);
        }
        
        // Additional info
        setTimeout(() => {
            console.log('üìä Test Summary:');
            testResults.forEach(result => {
                console.log(`${result.success ? '‚úÖ' : '‚ùå'} ${result.test}: ${result.message}`);
            });
            
            console.log('\nüîç Browser Info:');
            console.log('User Agent:', navigator.userAgent);
            console.log('Platform:', navigator.platform);
            console.log('Language:', navigator.language);
            console.log('Screen:', screen.width + 'x' + screen.height);
            
            // Try to load the main calendar
            console.log('\nüîÑ Attempting to load main calendar...');
            const link = document.createElement('a');
            link.href = 'infinite-calendar-final.html';
            link.textContent = 'üîó Open Main Calendar';
            link.style.display = 'block';
            link.style.marginTop = '20px';
            link.style.padding = '15px';
            link.style.background = '#667eea';
            link.style.color = 'white';
            link.style.textDecoration = 'none';
            link.style.borderRadius = '5px';
            link.style.textAlign = 'center';
            document.body.appendChild(link);
        }, 1000);
    </script>
</body>
</html>
